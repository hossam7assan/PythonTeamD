<!DOCTYPE html>
{% extends "base.html" %}
<html lang="en" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="UTF-8">

    </head>

    <body>

        {% block categories_block %}


            {%  for category in categories  %}

                <a href="#" class="list-group-item">{{ category.category_name }}</a>

            {%  endfor  %}


        {% endblock %}


        {% block main_block %}

            {% load staticfiles %}


                    <div class="modal fade" id="exampleModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Alert !</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    This post has 10 disLikes then will be delete <span>Thanks for attention</span>
                </div>
                <div class="modal-footer">

                    <form method="POST" class="confirm" action="/ourblog/delete/{{ post.id }}/">
                        {% csrf_token %}
                        <input type="submit" name="delete" class="btn btn-danger" data-toggle="modal"
                               data-target="#myModal" value="Delete">

                    </form>
                </div>
            </div>
        </div>
    </div>






            <div class="card mt-4">


                    <div class="card-body">
                          <div class="row">

                              <div class="col-md-6">
                                  <h3 class="text-primary">Post Title:</h3><h4 class="card-title">{{post.post_title}}</h4>
                                      <h3 class="text-primary">Post Author:</h3><h5>{{post.post_author}}</h5>
                                  <div  class="card"><p width="300px" height="600px">{{post.post_content}}</p></div>
                              </div>
                              <div class="col-md-2">
                                     <img class="imgAbt" width="250px"  height="250px" src="{% static post.post_picture %}" alt="">

                              </div>

                             </div>

                  {% for tag in tags %}
                        {{tag}}
                    {% endfor %}
                    <span class="pull-right">

                        {% if user.is_authenticated %}

                                <!--<img src="{% static 'images/icons/thumb-up.svg'  %}"> -->
                                <!--<img src="{% static 'images/icons/thumb-down.svg' %}">-->
                            <!--<button class="btn btn-success btn-sm" id="likeBtn" postId="{{post.id}}">Like</button>-->

                        {% if like_state %}
                              <button class="btn btn-success btn-sm" id="likeBtn" postId="{{post.id}}">Unlike</button>
                         <button class="btn btn-danger btn-sm" id="dislikeBtn" postId="{{post.id}}" disabled>Dislike</button>

                        {% elif dislike_state %}

                        <button class="btn btn-success btn-sm" id="likeBtn" postId="{{post.id}}" disabled>Like</button>
                         <button class="btn btn-danger btn-sm" id="dislikeBtn" postId="{{post.id}}" >Undislike</button>

                        {% else  %}
                           <button class="btn btn-success btn-sm" id="likeBtn" postId="{{post.id}}">Like</button>
                           <button class="btn btn-danger btn-sm" id="dislikeBtn" postId="{{post.id}}">Dislike</button>

                            {% endif %}






                            <!--<button class="btn btn-danger btn-sm" id="dislikeBtn" postId="{{post.id}}">Dislike</button>-->

                        {% endif %}
                    </span>
                    </div>
              </div>
              <!-- /.card -->

              <div class="card card-outline-secondary my-4">
                <div class="card-header text-primary">
                  Comments
                </div>
                <div class="card-body">

                    {%  for comment in comments  %}

                        <p>{{comment.comment_text}}</p>
                        <small class="text-muted">Posted by {{comment.comment_user.username}} on {{comment.comment_created_at}}</small>
                        <hr>

                        <div class="card-body">


                                {%  for comment_replies in replies  %}

                                    {%  for reply in comment_replies  %}

                                        {% if reply.reply_comment.id == comment.id%}

                                            <p>{{reply}}</p>
                                            <small class="text-muted">Posted by {{reply.reply_user}} on {{reply.reply_created_at}}</small>
                                            <hr>

                                        {% endif %}

                                    {%  endfor  %}

                                {%  endfor  %}

                                 {% if user.is_authenticated %}
                                    <form method="get" id="replyForm" action="/ourblog/commentreply/{{post.id}}/{{comment.id}}">{% csrf_token %}

                                        {{reply_form}}<br>

                                    <!--<div class="row">-->
                                        <!--<button type="submit" class="btn btn-info col-2 offset-1">Reply</button>-->
                                    <!--</div>-->

                                    </form>
                                 {% endif %}

                        </div>

                    {%  endfor  %}

                    {% if user.is_authenticated %}
                        <form method="get" id="commentForm" action="/ourblog/postcomment/{{post.id}}">{% csrf_token %}

                            {{comment_form}}<br>

                              <div class="row">
                                <button type="submit" class="btn btn-info col-2 offset-9">Comment</button>
                              </div>

                            </form>
                    {% endif %}

                </div>
              </div>
              <!-- /.card -->


        {% endblock %}


    </body>
</html>